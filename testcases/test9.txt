def foo (acc,amt) 
	error := false; 
	transaction do 
		bal := SQL "select balance from accounts where id = 'acc.id' limit 1;";
    v0 := is_empty(user);
		assert (!v0); 
		if (bal >= amt) then 
			newbal := bal - amt;
			v1 := SQL "update accounts set balance = newbal where id = 'acc.id';";
		else 
			error := true;
		end;
	end;
  assert(!error);
end

def bar (a)
	a:=b;
end
